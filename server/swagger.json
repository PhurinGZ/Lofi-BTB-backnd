{
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication operations"
    },
    {
      "name": "Playlists",
      "description": "API operations related to playlists"
    },
    {
      "name": "Search",
      "description": "Search for songs and playlists"
    },
    {
      "name": "Songs",
      "description": "Operations related to songs"
    },
    {
      "name": "Users",
      "description": "API operations related to users"
    }
  ],
  "paths": {
    "/api/login": {
      "post": {
        "summary": "Authenticate user",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                },
                "required": ["email", "password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful authentication",
            "content": {
              "application/json": {
                "example": {
                  "data": "<JWT_TOKEN>",
                  "message": "Signing in please wait..."
                }
              }
            }
          },
          "400": {
            "description": "Invalid email or password",
            "content": {
              "application/json": {
                "example": {
                  "message": "Invalid email or password"
                }
              }
            }
          }
        }
      }
    },
    "/api/playlists": {
      "post": {
        "summary": "Create a new playlist",
        "tags": ["Playlists"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "$ref": "#/components/schemas/PlayListInput"
            }
          }
        },
        "responses": {
          "200": {
            "description": "Playlist created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlayListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request. Invalid input data."
          },
          "401": {
            "description": "Unauthorized. User not authenticated."
          }
        }
      },
      "put": {
        "summary": "Edit playlist by ID",
        "tags": ["Playlists"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "objectId"
            },
            "description": "Playlist ID"
          }
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "$ref": "#/components/schemas/PlayListEditInput"
            }
          }
        },
        "responses": {
          "200": {
            "description": "Playlist updated successfully"
          },
          "400": {
            "description": "Bad request. Invalid input data."
          },
          "401": {
            "description": "Unauthorized. User not authenticated."
          },
          "403": {
            "description": "Forbidden. User does not have access to edit this playlist."
          },
          "404": {
            "description": "Not Found. Playlist with the given ID does not exist."
          }
        }
      },
      "get": {
        "summary": "Get all playlists",
        "tags": ["Playlists"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of all playlists",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PlayListResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized. User not authenticated."
          }
        }
      }
    },
    "/api/playlists/edit/{id}": {
      "put": {
        "summary": "Edit playlist by ID",
        "tags": ["Playlists"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "objectId"
            },
            "description": "Playlist ID"
          }
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "$ref": "#/components/schemas/PlayListEditInput"
            }
          }
        },
        "responses": {
          "200": {
            "description": "Playlist updated successfully"
          },
          "400": {
            "description": "Bad request. Invalid input data."
          },
          "401": {
            "description": "Unauthorized. User not authenticated."
          },
          "403": {
            "description": "Forbidden. User does not have access to edit this playlist."
          },
          "404": {
            "description": "Not Found. Playlist with the given ID does not exist."
          }
        }
      }
    },

    "/api/playlists/add-song": {
      "put": {
        "summary": "Add a song to a playlist",
        "tags": ["Playlists"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "$ref": "#/components/schemas/AddSongToPlaylistInput"
            }
          }
        },
        "responses": {
          "200": {
            "description": "Song added to playlist successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlayListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request. Invalid input data."
          },
          "401": {
            "description": "Unauthorized. User not authenticated."
          },
          "403": {
            "description": "Forbidden. User does not have access to edit this playlist."
          },
          "404": {
            "description": "Not Found. Playlist or song with the given ID does not exist."
          }
        }
      }
    },
    "/api/playlists/remove-song": {
      "put": {
        "summary": "Remove a song from a playlist",
        "tags": ["Playlists"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "$ref": "#/components/schemas/RemoveSongFromPlaylistInput"
            }
          }
        },
        "responses": {
          "200": {
            "description": "Song removed from playlist successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlayListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request. Invalid input data."
          },
          "401": {
            "description": "Unauthorized. User not authenticated."
          },
          "403": {
            "description": "Forbidden. User does not have access to edit this playlist."
          },
          "404": {
            "description": "Not Found. Playlist or song with the given ID does not exist."
          }
        }
      }
    },
    "/api/playlists/favourite": {
      "get": {
        "summary": "Get user's favorite playlists",
        "tags": ["Playlists"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of favorite playlists",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/PlayListResponse"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized. User not authenticated."
          }
        }
      }
    },
    "/api/playlists/random": {
      "get": {
        "summary": "Get random playlists",
        "tags": ["Playlists"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of random playlists",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/PlayListResponse"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized. User not authenticated."
          }
        }
      }
    },
    "/api/playlists/{id}": {
      "get": {
        "summary": "Get playlist by ID",
        "tags": ["Playlists"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "objectId"
            },
            "description": "Playlist ID"
          }
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Playlist details along with associated songs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlayListDetailsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request. Invalid playlist ID."
          },
          "401": {
            "description": "Unauthorized. User not authenticated."
          },
          "403": {
            "description": "Forbidden. User does not have access to view this playlist."
          },
          "404": {
            "description": "Not Found. Playlist with the given ID does not exist."
          }
        }
      },
      "delete": {
        "summary": "Delete playlist by ID",
        "tags": ["Playlists"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "objectId"
            },
            "description": "Playlist ID"
          }
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Playlist deleted successfully"
          },
          "400": {
            "description": "Bad request. Invalid playlist ID."
          },
          "401": {
            "description": "Unauthorized. User not authenticated."
          },
          "403": {
            "description": "Forbidden. User does not have access to delete this playlist."
          },
          "404": {
            "description": "Not Found. Playlist with the given ID does not exist."
          }
        }
      }
    }
  },
  "/api/search": {
    "get": {
      "summary": "Search for songs and playlists",
      "tags": ["Search"],
      "security": [
        {
          "BearerAuth": []
        }
      ],
      "parameters": [
        {
          "in": "query",
          "name": "search",
          "schema": {
            "type": "string"
          },
          "description": "Search query"
        }
      ],
      "responses": {
        "200": {
          "description": "Search results",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "object",
                    "properties": {
                      "songs": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/SongResponse"
                        }
                      },
                      "playlists": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/PlayListResponse"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "401": {
          "description": "Unauthorized. User not authenticated."
        }
      }
    }
  },
  "/api/songs/like": {
    "get": {
      "summary": "Get all liked songs by the authenticated user",
      "tags": ["Songs"],
      "security": [
        {
          "BearerAuth": []
        }
      ],
      "responses": {
        "200": {
          "description": "List of liked songs",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SongsList"
              }
            }
          }
        },
        "401": {
          "description": "Unauthorized. User not authenticated."
        }
      }
    }
  },
  "/api/users": {
    "post": {
      "summary": "Create a new user",
      "tags": ["Users"],
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/UserInput"
            }
          }
        }
      },
      "responses": {
        "200": {
          "description": "User account created successfully",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserResponse"
              }
            }
          }
        },
        "400": {
          "description": "Bad request. Invalid input data."
        },
        "403": {
          "description": "Forbidden. User with the given email already exists."
        }
      }
    },
    "get": {
      "summary": "Get all users",
      "tags": ["Users"],
      "security": [
        {
          "BearerAuth": []
        }
      ],
      "responses": {
        "200": {
          "description": "List of users",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UsersList"
              }
            }
          }
        },
        "401": {
          "description": "Unauthorized. User not authenticated."
        },
        "403": {
          "description": "Forbidden. User does not have admin privileges."
        }
      }
    }
  },
  "/api/users/{id}": {
    "get": {
      "summary": "Get user by ID",
      "tags": ["Users"],
      "parameters": [
        {
          "in": "path",
          "name": "id",
          "required": true,
          "schema": {
            "type": "string",
            "format": "objectId"
          },
          "description": "User ID"
        }
      ],
      "security": [
        {
          "BearerAuth": []
        }
      ],
      "responses": {
        "200": {
          "description": "User details",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserResponse"
              }
            }
          }
        },
        "401": {
          "description": "Unauthorized. User not authenticated."
        },
        "403": {
          "description": "Forbidden. User does not have access to this user's details."
        },
        "404": {
          "description": "Not Found. User with the given ID does not exist."
        }
      }
    },
    "put": {
      "summary": "Update user by ID",
      "tags": ["Users"],
      "parameters": [
        {
          "in": "path",
          "name": "id",
          "required": true,
          "schema": {
            "type": "string",
            "format": "objectId"
          },
          "description": "User ID"
        }
      ],
      "security": [
        {
          "BearerAuth": []
        }
      ],
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/UserInput"
            }
          }
        }
      },
      "responses": {
        "200": {
          "description": "Updated user details",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserResponse"
              }
            }
          }
        },
        "401": {
          "description": "Unauthorized. User not authenticated."
        },
        "403": {
          "description": "Forbidden. User does not have access to update this user's details."
        },
        "404": {
          "description": "Not Found. User with the given ID does not exist."
        }
      }
    },
    "delete": {
      "summary": "Delete user by ID",
      "tags": ["Users"],
      "parameters": [
        {
          "in": "path",
          "name": "id",
          "required": true,
          "schema": {
            "type": "string",
            "format": "objectId"
          },
          "description": "User ID"
        }
      ],
      "security": [
        {
          "BearerAuth": []
        }
      ],
      "responses": {
        "200": {
          "description": "User deleted successfully"
        },
        "401": {
          "description": "Unauthorized. User not authenticated."
        },
        "403": {
          "description": "Forbidden. User does not have admin privileges."
        },
        "404": {
          "description": "Not Found. User with the given ID does not exist."
        }
      }
    }
  },

  "components": {
    "schemas": {
      "SongsList": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/SongResponse"
        }
      },
      "SongResponse": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "artist": {
            "type": "string"
          },
          "album": {
            "type": "string"
          }
        }
      },
      "PlayListInput": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "desc": {
            "type": "string"
          },
          "img": {
            "type": "string"
          }
        },
        "required": ["name"]
      },
      "PlayListResponse": {
        "type": "object",
        "properties": {
          "data": {
            "$ref": "#/components/schemas/PlayListResponseData"
          }
        }
      },
      "PlayListResponseData": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "desc": {
            "type": "string"
          },
          "img": {
            "type": "string"
          }
        }
      },
      "PlayListEditInput": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "desc": {
            "type": "string"
          },
          "img": {
            "type": "string"
          }
        }
      },
      "AddSongToPlaylistInput": {
        "type": "object",
        "properties": {
          "playListId": {
            "type": "string"
          },
          "songId": {
            "type": "string"
          }
        },
        "required": ["playListId", "songId"]
      },
      "RemoveSongFromPlaylistInput": {
        "type": "object",
        "properties": {
          "playListId": {
            "type": "string"
          },
          "songId": {
            "type": "string"
          }
        },
        "required": ["playListId", "songId"]
      },
      "PlayListDetailsResponse": {
        "type": "object",
        "properties": {
          "playlist": {
            "$ref": "#/components/schemas/PlayListResponseData"
          },
          "songs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PlayListResponseData"
            }
          }
        }
      },
      "UserInput": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string",
            "minLength": 6
          }
        },
        "required": ["name", "email", "password"]
      },
      "UserResponse": {
        "type": "object",
        "properties": {
          "data": {
            "$ref": "#/components/schemas/UserResponseData"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "UserResponseData": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          }
        }
      },
      "UsersList": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/UserResponseData"
        }
      }
    }
  }
}
